---
title: 3. Basic repository setup
date: 'June 11, 2022'
description: Walkthrough basic repo setup
---

## Setting up the demo container

Basic Repo structure

- Lerna
- container app
- webpack file, babel-loader for react, htmlWebpackPlugin to load html as an entry point for our app
- Simple App example

<div className="iframe-container">
  <iframe
    src="https://codesandbox.io/embed/mfe-intro-basic-setup-u9sc68?editorsize=30&view=split&fontsize=14&moduleview=1&theme=dark&hidenavigation=1"
    style={{
      width: '100%',
      height: '600px',
      border: '0',
      borderRadius: '4px',
      overflow: 'hidden',
    }}
    title="mfe-intro-basic-setup"
    allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
    sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
  />
  >
</div>

<hr />
<br />
## Setting up the child container app with mod fed

- Mod fed plugin
  - Child app exposes App.jsx
  - Container app consumes App.jsx as remote
  - Refactor entry point in container app to include bootstrap.js
    - Gives webpack the opportunity for webpack to fetch new runtime dependency from childapp
  - Webpack config explanation:
    - name: name of current app, used by consumer if app exposes remote
    - filename: name of file that exposes list of remotes and how to load them
    - [remotes](https://webpack.js.org/guides/public-path/): LHS: module used when importing in consumer app (e.g. `import App from 'child/App'`), RHS: name field in child's webpack file @ protocol and url to fetch remote from
    - shared: will be explained in next section
    - [publicPath](https://webpack.js.org/guides/public-path/).:
      - Base path for assets within the application: Its used by webpack to point code loaded to the browser to other files bundled by webpack

<div className="iframe-container">
  <iframe
    src="https://codesandbox.io/embed/mfe-intro-mod-fed-with-child-sc2mui?editorsize=30&view=split&fontsize=14&moduleview=1&theme=dark&hidenavigation=1"
    style={{
      width: '100%',
      height: '600px',
      border: '0',
      borderRadius: '4px',
      overflow: 'hidden',
    }}
    title="mfe-intro-mod-fed-with-child"
    allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
    sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
  />
</div>

The following files are generated by the container app:

1. main.js: Entry point, contains content of index.js
2. bootstrap.js: Contains dependencies of container app (such as child app's remote). Allows webpack to know it has to fetch remote before running this file.

Sequence of events on the browser when you start up the app:

1. main.js from container is loaded and executed
2. bootstrap.js is loaded from container, theres a dependency there from child
3. remoteEntry.js is loaded from child app, dependencies from remoteEntry of child app are loaded next (App.js)

   <div style={{ position: 'relative', height: '300px', margin: '32px' }}>
     <Image
       src="/assets/bootstrap-entry.png"
       alt="monolithic-to-micro-services.png"
       layout={'fill'}
       objectFit={'contain'}
     />
   </div>
